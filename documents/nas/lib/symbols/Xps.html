<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="generator" content="JsDoc Toolkit" />
		
		<title>JsDoc Reference - Xps</title>

		<style type="text/css">
			/* default.css */
body
{
	font: 12px "Lucida Grande", Tahoma, Arial, Helvetica, sans-serif;
	width: 800px;
}

.header
{
	clear: both;
	background-color: #ccc;
	padding: 8px;
}

h1
{
	font-size: 150%;
	font-weight: bold;
	padding: 0;
	margin: 1em 0 0 .3em;
}

hr
{
	border: none 0;
	border-top: 1px solid #7F8FB1;
	height: 1px;
}

pre.code
{
	display: block;
	padding: 8px;
	border: 1px dashed #ccc;
}

#index
{
	margin-top: 24px;
	float: left;
	width: 160px;
	position: absolute;
	left: 8px;
	background-color: #F3F3F3;
	padding: 8px;
}

#content
{
	margin-left: 190px;
	width: 600px;
}

.classList
{
	list-style-type: none;
	padding: 0;
	margin: 0 0 0 8px;
	font-family: arial, sans-serif;
	font-size: 1em;
	overflow: auto;
}

.classList li
{
	padding: 0;
	margin: 0 0 8px 0;
}

.summaryTable { width: 100%; }

h1.classTitle
{
	font-size:170%;
	line-height:130%;
}

h2 { font-size: 110%; }
caption, div.sectionTitle
{
	background-color: #7F8FB1;
	color: #fff;
	font-size:130%;
	text-align: left;
	padding: 2px 6px 2px 6px;
	border: 1px #7F8FB1 solid;
}

div.sectionTitle { margin-bottom: 8px; }
.summaryTable thead { display: none; }

.summaryTable td
{
	vertical-align: top;
	padding: 4px;
	border-bottom: 1px #7F8FB1 solid;
	border-right: 1px #7F8FB1 solid;
}

/*col#summaryAttributes {}*/
.summaryTable td.attributes
{
	border-left: 1px #7F8FB1 solid;
	width: 140px;
	text-align: right;
}

td.attributes, .fixedFont
{
	line-height: 15px;
	color: #002EBE;
	font-family: "Courier New",Courier,monospace;
	font-size: 13px;
}

.summaryTable td.nameDescription
{
	text-align: left;
	font-size: 13px;
	line-height: 15px;
}

.summaryTable td.nameDescription, .description
{
	line-height: 15px;
	padding: 4px;
	padding-left: 4px;
}

.summaryTable { margin-bottom: 8px; }

ul.inheritsList
{
	list-style: square;
	margin-left: 20px;
	padding-left: 0;
}

.detailList {
	margin-left: 20px; 
	line-height: 15px;
}
.detailList dt { margin-left: 20px; }

.detailList .heading
{
	font-weight: bold;
	padding-bottom: 6px;
	margin-left: 0;
}

.light, td.attributes, .light a:link, .light a:visited
{
	color: #777;
	font-style: italic;
}

.fineprint
{
	text-align: right;
	font-size: 10px;
}
		</style>
	</head>

	<body>
<!-- ============================== header ================================= -->	
		<!-- begin static/header.html -->
		<div id="header">
</div>
		<!-- end static/header.html -->

<!-- ============================== classes index ============================ -->
		<div id="index">
			<!-- begin publish.classesIndex -->
			<div align="center"><a href="../index.html">Class Index</a>
| <a href="../files.html">File Index</a></div>
<hr />
<h2>Classes</h2>
<ul class="classList">
	
	<li><a href="../symbols/_getSectionId.html">_getSectionId</a></li>
	
	<li><i><a href="../symbols/_global_.html">_global_</a></i></li>
	
	<li><a href="../symbols/AEK2XDS.html">AEK2XDS</a></li>
	
	<li><a href="../symbols/AppHost.html">AppHost</a></li>
	
	<li><a href="../symbols/Array.html">Array</a></li>
	
	<li><a href="../symbols/Carrier.html">Carrier</a></li>
	
	<li><a href="../symbols/Date.html">Date</a></li>
	
	<li><a href="../symbols/FakeComposition.html">FakeComposition</a></li>
	
	<li><a href="../symbols/FakeLayer.html">FakeLayer</a></li>
	
	<li><a href="../symbols/inputMedia.html">inputMedia</a></li>
	
	<li><a href="../symbols/KeyFrame.html">KeyFrame</a></li>
	
	<li><a href="../symbols/nas.html">nas</a></li>
	
	<li><a href="../symbols/nas.Dpc.html">nas.Dpc</a></li>
	
	<li><a href="../symbols/nas.FCT2Frm.html">nas.FCT2Frm</a></li>
	
	<li><a href="../symbols/nas.FCT2ms.html">nas.FCT2ms</a></li>
	
	<li><a href="../symbols/nas.Frm2FCT.html">nas.Frm2FCT</a></li>
	
	<li><a href="../symbols/nas.GUI.Grid.html">nas.GUI.Grid</a></li>
	
	<li><a href="../symbols/nas.IMAGE_CR.html">nas.IMAGE_CR</a></li>
	
	<li><a href="../symbols/nas.LanguagePack.html">nas.LanguagePack</a></li>
	
	<li><a href="../symbols/nas.otome.html">nas.otome</a></li>
	
	<li><a href="../symbols/nas.RZf.html">nas.RZf</a></li>
	
	<li><a href="../symbols/nas.UnitValue.html">nas.UnitValue</a></li>
	
	<li><a href="../symbols/nas.UserInfo.html">nas.UserInfo</a></li>
	
	<li><a href="../symbols/nas.UserInfoCollection.html">nas.UserInfoCollection</a></li>
	
	<li><a href="../symbols/nas.Zf.html">nas.Zf</a></li>
	
	<li><a href="../symbols/QFrame.html">QFrame</a></li>
	
	<li><a href="../symbols/String.html">String</a></li>
	
	<li><a href="../symbols/STS2XPS.html">STS2XPS</a></li>
	
	<li><a href="../symbols/TimeLine.html">TimeLine</a></li>
	
	<li><a href="../symbols/TSH2XPS.html">TSH2XPS</a></li>
	
	<li><a href="../symbols/TVP2XPS.html">TVP2XPS</a></li>
	
	<li><a href="../symbols/Xps.html">Xps</a></li>
	
	<li><a href="../symbols/XPS2AEK.html">XPS2AEK</a></li>
	
	<li><a href="../symbols/XPS2TSH.html">XPS2TSH</a></li>
	
	<li><a href="../symbols/XPS2TVP.html">XPS2TVP</a></li>
	
	<li><a href="../symbols/XpsStore.html">XpsStore</a></li>
	
	<li><a href="../symbols/XpsTimelineSectionCollection.html">XpsTimelineSectionCollection</a></li>
	
	<li><a href="../symbols/XpsTimelineTrack.html">XpsTimelineTrack</a></li>
	
</ul>
<hr />
			<!-- end publish.classesIndex -->
		</div>
		
		<div id="content">
<!-- ============================== class title ============================ -->
			<h1 class="classTitle">
				
				Class Xps
			</h1>

<!-- ============================== class summary ========================== -->			
			<p class="description">
				
				
			
				汎用アニメーションタイムシートクラス
				
				
					<br /><i>Defined in: </i> <a href="../symbols/src/_Users_kiyo_Sites_remaping.js_nas_lib_xpsio.js.html">xpsio.js</a>.
				
			</p>

<!-- ============================== constructor summary ==================== -->			
			
			<table class="summaryTable" cellspacing="0" summary="A summary of the constructor documented in the class Xps.">
				<caption>Class Summary</caption>
				<thead>
					<tr>
						<th scope="col">Constructor Attributes</th>
						<th scope="col">Constructor Name and Description</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td class="attributes">&nbsp;</td>
						<td class="nameDescription" >
							<div class="fixedFont">
								<b><a href="../symbols/Xps.html#constructor">Xps</a></b>(Layers, Length, Framerate)
							</div>
							<div class="description">object Xps(汎用アニメーションタイムシート)日本形式のタイムシート記述クラスを提供</div>
						</td>
					</tr>
				</tbody>
			</table>
			

<!-- ============================== properties summary ===================== -->
			
				
				
				<table class="summaryTable" cellspacing="0" summary="A summary of the fields documented in the class Xps.">
					<caption>Field Summary</caption>
					<thead>
						<tr>
							<th scope="col">Field Attributes</th>
							<th scope="col">Field Name and Description</th>
						</tr>
					</thead>
					<tbody>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">
								<b><a href="../symbols/Xps.html#opus">opus</a></b>
								</div>
								<div class="description">ここからオブジェクト化を検討中</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">
								<b><a href="../symbols/Xps.html#xMap">xMap</a></b>
								</div>
								<div class="description">Xps標準のプロパティ設定</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">
								<b><a href="../symbols/Xps.html#xpsTracks">xpsTracks</a></b>
								</div>
								<div class="description">タイムライントラックコレクション配列</div>
							</td>
						</tr>
					
					</tbody>
				</table>
				
				
				
			

<!-- ============================== methods summary ======================== -->
			
				
				
				<table class="summaryTable" cellspacing="0" summary="A summary of the methods documented in the class Xps.">
					<caption>Method Summary</caption>
					<thead>
						<tr>
							<th scope="col">Method Attributes</th>
							<th scope="col">Method Name and Description</th>
						</tr>
					</thead>
					<tbody>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">Xps.<b><a href="../symbols/Xps.html#.compareCutIdf">compareCutIdf</a></b>(tgt, dst)
								</div>
								<div class="description">パース済みのカット識別子を比較してマッチ情報を返す
シーンカットともに一致した場合のみtrueそれ以外は false
引数に秒表記部が含まれないよう調整が必要</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#deleteTL">deleteTL</a></b>(args)
								</div>
								<div class="description">Xps.deleteTL([id])指定idのタイムラインを削除する。1～デフォルトの音声タイムラインとフレームコメントの削除はできないIDを単独又は配列渡しでXpsLayerとxpsTracks はそのうちタイムラインとして統合すべきかと思う。</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#duration">duration</a></b>()
								</div>
								<div class="description">継続時間をフレーム数で返すダイアログタイムラインの要素数で返す初期状態でボディの存在しないシートが存在しないように注意未記述でも空ボディのタイムラインが存在する。エラー関連コードは排除の方向でチェックが進んだら関数自体を廃してxpsTracks.durationの参照に切り替える</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#getIdentifier">getIdentifier</a></b>(opt)
								</div>
								<div class="description">カット識別子を返すオブジェクトメソッドXps.getIdentifier(識別オプション,)カット識別文字列を返すカット識別子はタイトル、制作番号、シーン、カット番号の各情報をセパレータ"_"で結合した文字列カット番号以外の情報はデフォルトの文字列と比較して一致した場合セパレータごと省略オプションで要素の結合状態を編集して返す
 セパレータ文字列は[(__)#\[]
 出力仕様をクラスメソッド互換に変更
 オブジェクトメソッドを利用する場合はURIEncodeを使用しないプレーン文字列でやり取りが行われるものとする
 旧:     TITLE_OPUS_SCENE_CUT
 新:     TITLE#OPUS[subtitle]__sSCENE-cCUT(time)

 基本的に’結合文字列をファイル名として使用できる’’ユーザ可読性がある’ことを前提にする
    プロダクションIDとSCiは"__(二連アンダーバー)"でセパレートする
    部分エンコーディング
    各要素は、自身の要素のセパレータを含む場合'%'を前置して部分的にURIエンコーディングを行う
    要素の文字列は識別子をファイル名等に利用する場合、ファイルシステムで使用できない文字が禁止されるが、この文字も併せて部分エンコードの対象となる。
    対象文字列は、Windowsの制限文字である¥\/:*?"<>| に加えて .</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">Xps.<b><a href="../symbols/Xps.html#.getIdentifier">getIdentifier</a></b>(myXps, opt)
								</div>
								<div class="description">Xpsオブジェクトから識別子を作成するクラスメソッド
     名前を変更するか又はオブジェクトメソッドに統合
     このメソッドは同名別機能のオブジェクトメソッドが存在するので厳重注意
     クラスメソッドはURIencodingを行い、オブジェクトメソッドは'%'エスケープを行う** 識別子のフレームレート拡張（予定）
    (括弧)でくくられた時間情報は、カット尺であり素材継続時間ではない。
    フレームレートを追加情報として補うことが可能とする
    その際は以下のルールに従う
    (FCT/FPS)
    単独のカットに対して設定されたフレームレートは、そのカットのみで有効
    基本的には、タイトルのプロパティからフレームレートを取得してそれを適用する。
    識別子には、基本的にフレームレートを含める必要性はない。
    タイトルのフレームレートと異なる場合のみ、識別子にフレームレートを埋め込む。

    このコーディングは、pmdb実装後に行われる。2018.07.16

引数  opt
"title"#"opus"//"s-c"("time")//"line"//"stage"//"job"//"status"
'episode'(or 'product')//'cut'//'statsu'

デフォルトでは制作管理情報が付加されたフルフォーマットの識別子が戻る</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#getInfo">getInfo</a></b>()
								</div>
								<div class="description">XPSオブジェクトに識別情報を問い合わせる（読み出し専用）XPS.getInfo()引数    なしXPSの識別情報を返す　ストア内に内容の一致するタイムシートがあればその情報を返し、ない場合はオブジェクト自身の情報を作成して返す</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#getNormarizedStream">getNormarizedStream</a></b>(layer_id)
								</div>
								<div class="description">=====================================機能分割 20130221レイヤストリームを正規化する内部処理用レイヤのデータ並びと同じ要素数の有効データで埋まった配列を返すキー作成に必要な機能だが、汎用性があるので分離してXpsのメソッドにキー作成はXPSのメソッドとして独立させる中間値補間サインはオプションでその挙動を制御する？タイムラインの種別によってデータが変化するのでその仕組みを組み込む正規化されたストリーム形成は、同時にセクションの解析でもあるので、このルーチンに組み込むか否か判断が必要取扱タイムライン種別が"timing"限定でなくなるので、他種別の処置を設定引数の種別を最初に判定する引数範囲をシフトする以下の正規化ストリーム取得関数はセクションが実装されたら不要
 
 2016 08 の改修でセクションオブジェクトを実装するので
 （少なくともタイミング向けに実装）この正規化メソッドの修正はしない</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#getRange">getRange</a></b>(Range)
								</div>
								<div class="description">Xps.getRange(Range:[[startC,startF],[endC,endF]])範囲内のデータをストリームで返すxpsのメソッドに移行 2013.02.23範囲外のデータは、ヌルストリングを返す2015.09.18負のアドレスを許容150919全てシートの範囲外を指定された場合は、範囲のサイズの空ストリームを返すチェックはない（不要）空ストリームを得る場合に使用可能開始と終了のアドレスが一致している場合は、該当セルの値を返す第一象限と第三象限の指定は無効</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#getTC">getTC</a></b>(mtd)
								</div>
								<div class="description">フレーム数からTCを返す</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#guessLink">guessLink</a></b>(myLayer)
								</div>
								<div class="description">Xpsオブジェクト用ＡＥ特化拡張リンク先自動判定メソッドＸｐｓ.guessLink(Layer)引数　:AEレイヤオブジェクト戻り値‘リンクIDAEのレイヤを引数で与える戻り値はオフセット2を加えて返す。ID 0/1 は予約0    :リンクなし    リンクすべきタイムランがない1    :特殊タイムライン    タイムラインの記述はシート内にないがスチル素材として静止タイムラインを与えるべきである2-    :2以降はリンクすべきタイムラインがある。タイムラインIDは戻値から２減じて得ることこのメソッドはAEに特化しているので、ＡＥ専用拡張に編入するべき(乙女か …乙女だ)</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#init">init</a></b>(Tracks, Length, Framerate)
								</div>
								<div class="description">再初期化
 
 現状旧オブジェクトの影響でレイヤ数(==トラック数-2)で初期化されるようになっているトラック数で初期化に変更する準備中</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#insertTL">insertTL</a></b>(myId, myTimelines)
								</div>
								<div class="description">Xpsにタイムラインを挿入
 データ構造変更により挿入・削除系操作はリニューアルが必要
 具体的には別オブジェクトの同期操作が不用になるので、単純化した操作系に変更するナリ
 引数はタイムラインオブジェクトを求める
 指定がない場合は、デフォルトの新規オブジェクトを作成して挿入するように変更Xps.insertTL(id,Timelines)Timelines(複数可・配列渡し)idの前方に引数のタイムラインを挿入idが未指定・範囲外の場合、後方へ挿入0番タイムラインの前方へは挿入不能(固定のデフォルトタイムライン)現状ではデータを持ったままタイムラインを挿入することはできない。必ず空のタイムラインが挿入される。</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#isSame">isSame</a></b>(targetXps, compareFramerate)
								</div>
								<div class="description">Xps.isSame(targetXps)引数    比較するXpsオブジェクトシート内容比較メソッド 相互の値が同じか否か比較する関数ユーザ名・時間等は比較しないでシート内容のみ比較するコメント類は連続する空白をひとつにまとめて比較するフレームレートを比較するオプションのデフォルト値はfalse</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#mkStage">mkStage</a></b>(stgName, stgLength, stgResolution, stgWidth, stgHeight, myOptions)
								</div>
								<div class="description">XPS.mkStage(stgName,stgLength,stgResolution,stgWidth,stgHeight,myOptions)引数stgName    ステージコンポ名を文字列で（省略時はXPSデータから作成）stagLength　ステージの継続時間をフレーム数で(省略時はXPSデータから作成)stgResolution    ステージの基準解像度をdpiで(省略時は入力メディア値から取得)stgWidth    ステージ幅をmm数で(省略時はフッテージから最大値を取得)stgHeight    ステージ奥行きをｍｍ数で(省略時はフッテージから最大値を取得)myOptions    オプション文字列map    ＭＡＰ検索を行なう（デフォルト）nomap    ＭＡＰ検索を行なわないselect    現在の選択アイテムをメンバーにする(デフォルトでは無視)align[N]    エレメントの強制アライメントを行なう。 [N]は数値align0    左下align1    下align2    右下align3    左align4    中央(デフォルト)align5    右align6    左上align7    上align8    右上つまり6    7    83    4    50    1    2こうですアライメントは未実装(2009.10.23)bg[N]    背景の取り込みオプション(BG/BOOK等のタイミングのないフッテージ全て)bg0    BGを取り込まないbg#    #枚のBGを取り込む(1-9) 9個以上はデフォルトにしといてください　数の制限が主な用途だと思うのでbgAll    あるだけ全て取り込む(デフォルト)自動化を進める観点から主体となるオブジェクトのメソッドで組むのが最も適切っぽいただし、ＡＥに特化したメソッドなのでotomeのライブラリ中で拡張を行なうここではコンストラクタの拡張ではなくXPSバッファの機能で実装しておく。ピクセル比率は現在"1"固定この関数は現時点で　XpsオブジェクトではなくXPSバッファの拡張である点に注意　オブジェクトのメソッドコールはできない各引数は基本的に省略が前提なのであった　要ケーステスト(2009/10/23)入れ替え時に不都合が発生するケースがあるのでクラスメソッドに変更(2010/11)</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#newTracks">newTracks</a></b>(trackCount, frameCount)
								</div>
								<div class="description">新規タイムライントレーラを作成固定のダイアログタイムライン及びフレームコメントタイムラインがある。この二つのタイムラインは、レコードの開始及び終了マーカーを兼ねるため削除できないので注意現状で以前の引数を踏襲しているため旧のレイヤーカウントで初期化が行なわれる トラックカウントに変更の予定
trackSpec オブジェクトで初期化に変更</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">Xps.<b><a href="../symbols/Xps.html#.normalizeCell">normalizeCell</a></b>(myString)
								</div>
								<div class="description">セル記述を整形して比較評価用に正規化された文字列を返すクラスメソッド
戻り値は、<グループ名>-<セル番号>[-<ポストフィックス>]

A_(001)_ovl  A-1-ovl</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">Xps.<b><a href="../symbols/Xps.html#.parseCutIF">parseCutIF</a></b>(myIdentifier)
								</div>
								<div class="description">SCiデータ上のカット名をセパレータで分離するクラスメソッド
この場合のカット名には時間情報・ステータス等を含まないものとする
パースされたカット名は、カット、シーンの順の配列で戻す有効最大２要素

    [cut,scene,<void>,~];//第三要素以降は分離しても使用されないことに注意
    [cut,scene]
    [cut]

要素数が識別子に含まれる情報の深度を示す</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">Xps.<b><a href="../symbols/Xps.html#.parseIdentifier">parseIdentifier</a></b>(myIdentifier)
								</div>
								<div class="description">データ識別子をパースして無名オブジェクトで戻す
     データ判定を兼ねる
     分割要素がカット番号を含まない（データ識別子でない）場合はfalseを戻す
     SCi/listEntryオブジェクトとの兼ね合いを要調整20170104
     
     asign/
     オブジェクトメソッドの識別子も解釈可能にする
    
    '//（二連スラッシュ）'を認識できなかったケースに限り'__（二連アンダーバー）'をセパレータとして認識するように変更*"_(アンダーバー単独)"はセパレータ以外で使用するケースがあるため要注意</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">Xps.<b><a href="../symbols/Xps.html#.parseProduct">parseProduct</a></b>(productString)
								</div>
								<div class="description">プロダクト識別子をパースして返す
    サブタイトルは一致比較時に比較対象から外す
    引数がまたは第一要素がカラの場合はfalse</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">Xps.<b><a href="../symbols/Xps.html#.parseSCi">parseSCi</a></b>(sciString)
								</div>
								<div class="description">sci識別子をパースして返す
    識別子に付属する時間情報はトランジション／継続時間ではなくカット尺のみ
    補助情報は持たせない。かつ対比時に比較対象とならないものとする
    カット番号情報は、ここではscene-cutの分離を行わない
    比較の必要がある場合に始めて比較を行う方針でコーディングする
    sciString末尾の（括弧内）は時間情報部分
    (括弧)による記述が2つ以上ある場合は最初の開き括弧の前がカット識別子で、時間情報は最後の（括弧）内の情報を用いる
    
    書式は(TC//framareteString) or (TC) フレームレートの指定のない場合はデフォルトの値で補われる
    (1+12),(1+12//24FPS),(1:12//30),(01:12//30DF),(00:00:01:12//59.94)等
    デフォルト値は、タイトルから取得
    sciStringに時間情報が含まれないケースあり
    time指定の存在しない識別子の場合"6:0"を補う

    引数が与えられない場合は''とする</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#parseXps">parseXps</a></b>(datastream)
								</div>
								<div class="description">読み込みメソッドのXpsパーサを分離元の読み込みメソッドは、このパーサのラッパとして残置他フォーマットのデータパーサはライブラリに分離される。このメソッドはXpsのパース専用になる(将来の拡張用として必須)2013.04.06パース成功時はオブジェクト自身を返す。</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#put">put</a></b>(myAddress, myStream)
								</div>
								<div class="description">Xps.put(書込開始アドレス:[startC,startF],データストリーム)書込開始アドレスを起点にストリームでデータ置き換えXpsオブジェクトメソッドundo/redo等はUIレベルの実装なのでここでは関知しない書込開始アドレスに負の数を与えると、書込アドレスが負の場合レンジ外となるレンジ外データは無視されるこのメソッドでは本体データとしてセパレータの",""\n"を与えることはできない（禁則事項）リザルトとして書き込みに成功したベクトル（左上、右下）、書き換え前のデータストリーム、書き込みに成功したデータを返す</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#readIN">readIN</a></b>(datastream)
								</div>
								<div class="description">読み込みメソッドラッパとして残置されるが、内部には他フォーマットの判定部分を置かない。インポーターとして使用する場合は、更にこの外側にデータ前処理部分をおくか、このメソッドをオーバーライドして使用すること。戻り値として、parseXps の戻り値を返すこと。2013.04.06</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#reInitBody">reInitBody</a></b>(newTimelines, newDuration)
								</div>
								<div class="description">Xps.reInitBody(newTimelines:int,newDuration:int)Xps本体データのサイズを変更する。元あったデータ内容は可能な限り保存切り捨て分はなくなる。新たに出来たレコードは、ヌルストリングデータで埋める。セクションキャッシュはすべて無効
 トラック引数の値はコメントトラックの値を含めたトラック全数
 トラック状態を[dialog,timing,comment]にするためには３を与える
 レイヤー数にあらず</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#setDuration">setDuration</a></b>(myDuration)
								</div>
								<div class="description">Xpsの継続時間を変更する
     引数：int フレーム数
     現在の値と同じ場合は何もしない
     継続時間が減少する場合はシート後方から削除
     増加の場合は""で初期化
     0は処理失敗</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">Xps.<b><a href="../symbols/Xps.html#.sliceReplacementLabel">sliceReplacementLabel</a></b>(myStr)
								</div>
								<div class="description">グループ記述の有る文字列を分解して要素名とグループ名を分離するXpsクラスメソッド
    引数の文字列を評価してそのラベルとエントリ文字列に分解して返す
    Reaplacmentトラック用

引数:セルエントリ文字列
戻値:配列[エントリ文字列,グループラベル]

グループラベルが存在しない文字列の戻値は要素数１の配列</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">Xps.<b><a href="../symbols/Xps.html#.stringifyIdf">stringifyIdf</a></b>(myData)
								</div>
								<div class="description">配列指定で識別子をビルドするテスト用関数
引数: [title,opus,subtitle,scene,cut,time,line,stage,job,status]</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#syncIdentifier">syncIdentifier</a></b>(myIdentifier, withoutTime)
								</div>
								<div class="description">識別子の情報でカットのプロパティを上書きする
    インポート時に必要な情報は識別子にすべて含まれるためそれで上書きを行う
    duration は
        元シートのデータを維持
        新シートに合わせる
    の二択となるので要注意
    新規作成時にライン〜ステータス情報が欠落するのでそれは判定して補う
    識別子に含まれる時間情報を同期させる場合は、引数withoutTimeにfalseを与える
    初期値はtrue(時間同期なし)</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#time">time</a></b>()
								</div>
								<div class="description">カット尺をフレーム数で返す</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#timeline">timeline</a></b>(idx)
								</div>
								<div class="description">XPS.</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/Xps.html#toString">toString</a></b>()
								</div>
								<div class="description">書きだしメソッド</div>
							</td>
						</tr>
					
					</tbody>
				</table>
				
				
				
			
<!-- ============================== events summary ======================== -->
			

<!-- ============================== constructor details ==================== -->		
			
			<div class="details"><a name="constructor"> </a>
				<div class="sectionTitle">
					Class Detail
				</div>
				
				<div class="fixedFont">
						<b>Xps</b>(Layers, Length, Framerate)
				</div>
				
				<div class="description">
					object Xps(汎用アニメーションタイムシート)日本形式のタイムシート記述クラスを提供
					
				</div>
				
				
				
				
					
						<dl class="detailList">
						<dt class="heading">Parameters:</dt>
						
							<dt>
								<span class="light fixedFont">{Number or Array or Object}</span>  <b>Layers</b>
								
							</dt>
								<dd>タイムライントラックのうちデフォルトのダイアログ(1)を抜いた数</dd>
						
							<dt>
								<span class="light fixedFont">{Number}</span>  <b>Length</b>
								
							</dt>
								<dd>タイムシート記述継続長（フレーム数）で初期化</dd>
						
							<dt>
								<span class="light fixedFont">{Object nas.Framerate or Number}</span>  <b>Framerate</b>
								
							</dt>
								<dd>フレームレート  fps    Xpsオブジェクトの初期化引数を拡張第一引数はかつて「レイヤ数」であったが、これを拡張して配列を受け取れるようにする引数がスカラの場合は、従来互換として「リプレースメントトラック数」とする配列であった場合は、以下の順で解決を行う[リプレースメントトラック数][ダイアログトラック数,リプレースメントトラック数][ダイアログトラック数,リプレースメントトラック数,ジオメトリトラック数][ダイアログトラック数,リプレースメントトラック数,ジオメトリトラック数,コンポジットトラック数]配列長が1の場合は、特例でリプレースメントトラック数とするダイアログトラック数は、1以上とする1以下の値が与えられた際は1として初期化される。
完全な指定を行う場合は、引数として専用の指定オブジェクトを渡す
例:
{
    dialog:1,
    still:1,
    replacement:2,
    still:1,
    replacement:2,
    camera:1,
    replacement:2,
    effects:1,
    stage:2,
    sound:2
} 各プロパティの出現順位置・回数は任意 冒頭は基本的にdialigで1以上の値にすること。そうでない場合は{dialog:1}が補われる。 末尾プロパティはcommentで値1とすること 冒頭プロパティがdialogでない場合は、{dialog:1} が補われる 末尾プロパティがcommentでない場合にはデフォルトの{comment:1}が補われる</dd>
						
						</dl>
					
					
					
					
					
					
					

			</div>
			

<!-- ============================== field details ========================== -->		
			
				<div class="sectionTitle">
					Field Detail
				</div>
				
					<a name="opus"> </a>
					<div class="fixedFont">
					
					<span class="light">{this.opus = (myOpus) ? myOpus : "--";
    this.title = (myTitle) ? myTitle : "noTitle";
    this.subtitle = (mySubTitle) ? mySubTitle : "--";
    this.scene = (myScene) ? myScene : "";
    this.cut = (myCut) ? myCut : "";}</span>
					<b>opus</b>
					
					</div>
					<div class="description">
						ここからオブジェクト化を検討中
						
						
					</div>
					
					

						
						
						
						

					<hr />
				
					<a name="xMap"> </a>
					<div class="fixedFont">
					
					
					<b>xMap</b>
					
					</div>
					<div class="description">
						Xps標準のプロパティ設定
						
						
					</div>
					
					

						
						
						
						

					<hr />
				
					<a name="xpsTracks"> </a>
					<div class="fixedFont">
					
					
					<b>xpsTracks</b>
					
					</div>
					<div class="description">
						タイムライントラックコレクション配列
						
						
					</div>
					
					

						
						
						
						

					
				
			

<!-- ============================== method details ========================= -->		
			
				<div class="sectionTitle">
					Method Detail
				</div>
				
					<a name=".compareCutIdf"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">Xps.</span><b>compareCutIdf</b>(tgt, dst)
					
					</div>
					<div class="description">
						パース済みのカット識別子を比較してマッチ情報を返す
シーンカットともに一致した場合のみtrueそれ以外は false
引数に秒表記部が含まれないよう調整が必要
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>tgt</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>dst</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name="deleteTL"> </a>
					<div class="fixedFont">
					
					
					<b>deleteTL</b>(args)
					
					</div>
					<div class="description">
						Xps.deleteTL([id])指定idのタイムラインを削除する。1～デフォルトの音声タイムラインとフレームコメントの削除はできないIDを単独又は配列渡しでXpsLayerとxpsTracks はそのうちタイムラインとして統合すべきかと思う。
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>args</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name="duration"> </a>
					<div class="fixedFont">
					
					<span class="light">{*}</span>
					<b>duration</b>()
					
					</div>
					<div class="description">
						継続時間をフレーム数で返すダイアログタイムラインの要素数で返す初期状態でボディの存在しないシートが存在しないように注意未記述でも空ボディのタイムラインが存在する。エラー関連コードは排除の方向でチェックが進んだら関数自体を廃してxpsTracks.durationの参照に切り替える
						
						
					</div>
					
					
					
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{*}</span> </dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name="getIdentifier"> </a>
					<div class="fixedFont">
					
					<span class="light">{string}</span>
					<b>getIdentifier</b>(opt)
					
					</div>
					<div class="description">
						カット識別子を返すオブジェクトメソッドXps.getIdentifier(識別オプション,)カット識別文字列を返すカット識別子はタイトル、制作番号、シーン、カット番号の各情報をセパレータ"_"で結合した文字列カット番号以外の情報はデフォルトの文字列と比較して一致した場合セパレータごと省略オプションで要素の結合状態を編集して返す
 セパレータ文字列は[(__)#\[]
 出力仕様をクラスメソッド互換に変更
 オブジェクトメソッドを利用する場合はURIEncodeを使用しないプレーン文字列でやり取りが行われるものとする
 旧:     TITLE_OPUS_SCENE_CUT
 新:     TITLE#OPUS[subtitle]__sSCENE-cCUT(time)

 基本的に’結合文字列をファイル名として使用できる’’ユーザ可読性がある’ことを前提にする
    プロダクションIDとSCiは"__(二連アンダーバー)"でセパレートする
    部分エンコーディング
    各要素は、自身の要素のセパレータを含む場合'%'を前置して部分的にURIエンコーディングを行う
    要素の文字列は識別子をファイル名等に利用する場合、ファイルシステムで使用できない文字が禁止されるが、この文字も併せて部分エンコードの対象となる。
    対象文字列は、Windowsの制限文字である¥\/:*?"<>| に加えて . 及びエンコード前置文字の %
    (これらは関数側で記述)
    
TITLE"#"が禁止される
OPUS    "#","[","__" が禁止される
subtitle "["."]","__"が禁止される
SCi     "__","("が禁止される
 options:
 'full' 全ての要素を含む識別文字列で返す
        TITLE#OPUS[subtitle]__sSCENE-cCUT(time)
 'episode'
        #OPUS[subtitle]
 'cut'
        #OPUS__sSCENE-cCUT
 'simple'
        TITLE#OPUS__sSCENE-cCUT
 'complex'
        TITLE#OPUS[subtitle]__sSCENE-cCUT
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>opt</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{string}</span> </dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name=".getIdentifier"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">Xps.</span><b>getIdentifier</b>(myXps, opt)
					
					</div>
					<div class="description">
						Xpsオブジェクトから識別子を作成するクラスメソッド
     名前を変更するか又はオブジェクトメソッドに統合
     このメソッドは同名別機能のオブジェクトメソッドが存在するので厳重注意
     クラスメソッドはURIencodingを行い、オブジェクトメソッドは'%'エスケープを行う** 識別子のフレームレート拡張（予定）
    (括弧)でくくられた時間情報は、カット尺であり素材継続時間ではない。
    フレームレートを追加情報として補うことが可能とする
    その際は以下のルールに従う
    (FCT/FPS)
    単独のカットに対して設定されたフレームレートは、そのカットのみで有効
    基本的には、タイトルのプロパティからフレームレートを取得してそれを適用する。
    識別子には、基本的にフレームレートを含める必要性はない。
    タイトルのフレームレートと異なる場合のみ、識別子にフレームレートを埋め込む。

    このコーディングは、pmdb実装後に行われる。2018.07.16

引数  opt
"title"#"opus"//"s-c"("time")//"line"//"stage"//"job"//"status"
'episode'(or 'product')//'cut'//'statsu'

デフォルトでは制作管理情報が付加されたフルフォーマットの識別子が戻る
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>myXps</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>opt</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name="getInfo"> </a>
					<div class="fixedFont">
					
					<span class="light">{Object}</span>
					<b>getInfo</b>()
					
					</div>
					<div class="description">
						XPSオブジェクトに識別情報を問い合わせる（読み出し専用）XPS.getInfo()引数    なしXPSの識別情報を返す　ストア内に内容の一致するタイムシートがあればその情報を返し、ない場合はオブジェクト自身の情報を作成して返す
						
							<br />
							<i>Defined in: </i> <a href="../symbols/src/_Users_kiyo_Sites_remaping.js_nas_lib_nas_OtomeLib.js.html">nas_OtomeLib.js</a>.
						
						
					</div>
					
					
					
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{Object}</span> </dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name="getNormarizedStream"> </a>
					<div class="fixedFont">
					
					<span class="light">{<a href="../symbols/Array.html">Array</a>}</span>
					<b>getNormarizedStream</b>(layer_id)
					
					</div>
					<div class="description">
						=====================================機能分割 20130221レイヤストリームを正規化する内部処理用レイヤのデータ並びと同じ要素数の有効データで埋まった配列を返すキー作成に必要な機能だが、汎用性があるので分離してXpsのメソッドにキー作成はXPSのメソッドとして独立させる中間値補間サインはオプションでその挙動を制御する？タイムラインの種別によってデータが変化するのでその仕組みを組み込む正規化されたストリーム形成は、同時にセクションの解析でもあるので、このルーチンに組み込むか否か判断が必要取扱タイムライン種別が"timing"限定でなくなるので、他種別の処置を設定引数の種別を最初に判定する引数範囲をシフトする以下の正規化ストリーム取得関数はセクションが実装されたら不要
 
 2016 08 の改修でセクションオブジェクトを実装するので
 （少なくともタイミング向けに実装）この正規化メソッドの修正はしない
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>layer_id</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{<a href="../symbols/Array.html">Array</a>}</span> </dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name="getRange"> </a>
					<div class="fixedFont">
					
					<span class="light">{<a href="../symbols/Array.html">Array</a>}</span>
					<b>getRange</b>(Range)
					
					</div>
					<div class="description">
						Xps.getRange(Range:[[startC,startF],[endC,endF]])範囲内のデータをストリームで返すxpsのメソッドに移行 2013.02.23範囲外のデータは、ヌルストリングを返す2015.09.18負のアドレスを許容150919全てシートの範囲外を指定された場合は、範囲のサイズの空ストリームを返すチェックはない（不要）空ストリームを得る場合に使用可能開始と終了のアドレスが一致している場合は、該当セルの値を返す第一象限と第三象限の指定は無効
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>Range</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{<a href="../symbols/Array.html">Array</a>}</span> </dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name="getTC"> </a>
					<div class="fixedFont">
					
					<span class="light">{string}</span>
					<b>getTC</b>(mtd)
					
					</div>
					<div class="description">
						フレーム数からTCを返す
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>mtd</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{string}</span> </dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name="guessLink"> </a>
					<div class="fixedFont">
					
					<span class="light">{*}</span>
					<b>guessLink</b>(myLayer)
					
					</div>
					<div class="description">
						Xpsオブジェクト用ＡＥ特化拡張リンク先自動判定メソッドＸｐｓ.guessLink(Layer)引数　:AEレイヤオブジェクト戻り値‘リンクIDAEのレイヤを引数で与える戻り値はオフセット2を加えて返す。ID 0/1 は予約0    :リンクなし    リンクすべきタイムランがない1    :特殊タイムライン    タイムラインの記述はシート内にないがスチル素材として静止タイムラインを与えるべきである2-    :2以降はリンクすべきタイムラインがある。タイムラインIDは戻値から２減じて得ることこのメソッドはAEに特化しているので、ＡＥ専用拡張に編入するべき(乙女か …乙女だ)
						
							<br />
							<i>Defined in: </i> <a href="../symbols/src/_Users_kiyo_Sites_remaping.js_nas_lib_nas_OtomeLib.js.html">nas_OtomeLib.js</a>.
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>myLayer</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{*}</span> </dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name="init"> </a>
					<div class="fixedFont">
					
					
					<b>init</b>(Tracks, Length, Framerate)
					
					</div>
					<div class="description">
						再初期化
 
 現状旧オブジェクトの影響でレイヤ数(==トラック数-2)で初期化されるようになっているトラック数で初期化に変更する準備中
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>Tracks</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>Length</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>Framerate</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name="insertTL"> </a>
					<div class="fixedFont">
					
					
					<b>insertTL</b>(myId, myTimelines)
					
					</div>
					<div class="description">
						Xpsにタイムラインを挿入
 データ構造変更により挿入・削除系操作はリニューアルが必要
 具体的には別オブジェクトの同期操作が不用になるので、単純化した操作系に変更するナリ
 引数はタイムラインオブジェクトを求める
 指定がない場合は、デフォルトの新規オブジェクトを作成して挿入するように変更Xps.insertTL(id,Timelines)Timelines(複数可・配列渡し)idの前方に引数のタイムラインを挿入idが未指定・範囲外の場合、後方へ挿入0番タイムラインの前方へは挿入不能(固定のデフォルトタイムライン)現状ではデータを持ったままタイムラインを挿入することはできない。必ず空のタイムラインが挿入される。
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{Number}</span> <b>myId</b>
									
								</dt>
								<dd>挿入点トラックid　指定idの前方に挿入される</dd>
							
								<dt>
									<span class="light fixedFont">{Araay of XpsTimelineTrack}</span> <b>myTimelines</b>
									
								</dt>
								<dd>挿入オブジェクトまたは配列</dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name="isSame"> </a>
					<div class="fixedFont">
					
					<span class="light">{boolean}</span>
					<b>isSame</b>(targetXps, compareFramerate)
					
					</div>
					<div class="description">
						Xps.isSame(targetXps)引数    比較するXpsオブジェクトシート内容比較メソッド 相互の値が同じか否か比較する関数ユーザ名・時間等は比較しないでシート内容のみ比較するコメント類は連続する空白をひとつにまとめて比較するフレームレートを比較するオプションのデフォルト値はfalse
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>targetXps</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>compareFramerate</b>
									
								</dt>
								<dd>bool</dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{boolean}</span> </dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name="mkStage"> </a>
					<div class="fixedFont">
					
					<span class="light">{*}</span>
					<b>mkStage</b>(stgName, stgLength, stgResolution, stgWidth, stgHeight, myOptions)
					
					</div>
					<div class="description">
						XPS.mkStage(stgName,stgLength,stgResolution,stgWidth,stgHeight,myOptions)引数stgName    ステージコンポ名を文字列で（省略時はXPSデータから作成）stagLength　ステージの継続時間をフレーム数で(省略時はXPSデータから作成)stgResolution    ステージの基準解像度をdpiで(省略時は入力メディア値から取得)stgWidth    ステージ幅をmm数で(省略時はフッテージから最大値を取得)stgHeight    ステージ奥行きをｍｍ数で(省略時はフッテージから最大値を取得)myOptions    オプション文字列map    ＭＡＰ検索を行なう（デフォルト）nomap    ＭＡＰ検索を行なわないselect    現在の選択アイテムをメンバーにする(デフォルトでは無視)align[N]    エレメントの強制アライメントを行なう。 [N]は数値align0    左下align1    下align2    右下align3    左align4    中央(デフォルト)align5    右align6    左上align7    上align8    右上つまり6    7    83    4    50    1    2こうですアライメントは未実装(2009.10.23)bg[N]    背景の取り込みオプション(BG/BOOK等のタイミングのないフッテージ全て)bg0    BGを取り込まないbg#    #枚のBGを取り込む(1-9) 9個以上はデフォルトにしといてください　数の制限が主な用途だと思うのでbgAll    あるだけ全て取り込む(デフォルト)自動化を進める観点から主体となるオブジェクトのメソッドで組むのが最も適切っぽいただし、ＡＥに特化したメソッドなのでotomeのライブラリ中で拡張を行なうここではコンストラクタの拡張ではなくXPSバッファの機能で実装しておく。ピクセル比率は現在"1"固定この関数は現時点で　XpsオブジェクトではなくXPSバッファの拡張である点に注意　オブジェクトのメソッドコールはできない各引数は基本的に省略が前提なのであった　要ケーステスト(2009/10/23)入れ替え時に不都合が発生するケースがあるのでクラスメソッドに変更(2010/11)
						
							<br />
							<i>Defined in: </i> <a href="../symbols/src/_Users_kiyo_Sites_remaping.js_nas_lib_nas_OtomeLib.js.html">nas_OtomeLib.js</a>.
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>stgName</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>stgLength</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>stgResolution</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>stgWidth</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>stgHeight</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>myOptions</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{*}</span> </dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name="newTracks"> </a>
					<div class="fixedFont">
					
					<span class="light">{<a href="../symbols/Array.html">Array</a>}</span>
					<b>newTracks</b>(trackCount, frameCount)
					
					</div>
					<div class="description">
						新規タイムライントレーラを作成固定のダイアログタイムライン及びフレームコメントタイムラインがある。この二つのタイムラインは、レコードの開始及び終了マーカーを兼ねるため削除できないので注意現状で以前の引数を踏襲しているため旧のレイヤーカウントで初期化が行なわれる トラックカウントに変更の予定
trackSpec オブジェクトで初期化に変更
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{Number}</span> <b>trackCount</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<span class="light fixedFont">{Number}</span> <b>frameCount</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{<a href="../symbols/Array.html">Array</a>}</span> タイムライントラックトレーラはプロパティトレーラを兼ねる初期化時のみ利用初期化時にカメラトラックを作成しない</dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name=".normalizeCell"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">Xps.</span><b>normalizeCell</b>(myString)
					
					</div>
					<div class="description">
						セル記述を整形して比較評価用に正規化された文字列を返すクラスメソッド
戻り値は、<グループ名>-<セル番号>[-<ポストフィックス>]

A_(001)_ovl  A-1-ovl
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>myString</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name=".parseCutIF"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">Xps.</span><b>parseCutIF</b>(myIdentifier)
					
					</div>
					<div class="description">
						SCiデータ上のカット名をセパレータで分離するクラスメソッド
この場合のカット名には時間情報・ステータス等を含まないものとする
パースされたカット名は、カット、シーンの順の配列で戻す有効最大２要素

    [cut,scene,<void>,~];//第三要素以降は分離しても使用されないことに注意
    [cut,scene]
    [cut]

要素数が識別子に含まれる情報の深度を示す
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>myIdentifier</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name=".parseIdentifier"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">Xps.</span><b>parseIdentifier</b>(myIdentifier)
					
					</div>
					<div class="description">
						データ識別子をパースして無名オブジェクトで戻す
     データ判定を兼ねる
     分割要素がカット番号を含まない（データ識別子でない）場合はfalseを戻す
     SCi/listEntryオブジェクトとの兼ね合いを要調整20170104
     
     asign/
     オブジェクトメソッドの識別子も解釈可能にする
    
    '//（二連スラッシュ）'を認識できなかったケースに限り'__（二連アンダーバー）'をセパレータとして認識するように変更*"_(アンダーバー単独)"はセパレータ以外で使用するケースがあるため要注意
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>myIdentifier</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name=".parseProduct"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">Xps.</span><b>parseProduct</b>(productString)
					
					</div>
					<div class="description">
						プロダクト識別子をパースして返す
    サブタイトルは一致比較時に比較対象から外す
    引数がまたは第一要素がカラの場合はfalse
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>productString</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name=".parseSCi"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">Xps.</span><b>parseSCi</b>(sciString)
					
					</div>
					<div class="description">
						sci識別子をパースして返す
    識別子に付属する時間情報はトランジション／継続時間ではなくカット尺のみ
    補助情報は持たせない。かつ対比時に比較対象とならないものとする
    カット番号情報は、ここではscene-cutの分離を行わない
    比較の必要がある場合に始めて比較を行う方針でコーディングする
    sciString末尾の（括弧内）は時間情報部分
    (括弧)による記述が2つ以上ある場合は最初の開き括弧の前がカット識別子で、時間情報は最後の（括弧）内の情報を用いる
    
    書式は(TC//framareteString) or (TC) フレームレートの指定のない場合はデフォルトの値で補われる
    (1+12),(1+12//24FPS),(1:12//30),(01:12//30DF),(00:00:01:12//59.94)等
    デフォルト値は、タイトルから取得
    sciStringに時間情報が含まれないケースあり
    time指定の存在しない識別子の場合"6:0"を補う

    引数が与えられない場合は''とする
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>sciString</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name="parseXps"> </a>
					<div class="fixedFont">
					
					<span class="light">{boolean}</span>
					<b>parseXps</b>(datastream)
					
					</div>
					<div class="description">
						読み込みメソッドのXpsパーサを分離元の読み込みメソッドは、このパーサのラッパとして残置他フォーマットのデータパーサはライブラリに分離される。このメソッドはXpsのパース専用になる(将来の拡張用として必須)2013.04.06パース成功時はオブジェクト自身を返す。
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>datastream</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{boolean}</span> パーサにフラグを与えて、フレームレートが確定するまでフレーム計算を行わないように修正</dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name="put"> </a>
					<div class="fixedFont">
					
					<span class="light">{*}</span>
					<b>put</b>(myAddress, myStream)
					
					</div>
					<div class="description">
						Xps.put(書込開始アドレス:[startC,startF],データストリーム)書込開始アドレスを起点にストリームでデータ置き換えXpsオブジェクトメソッドundo/redo等はUIレベルの実装なのでここでは関知しない書込開始アドレスに負の数を与えると、書込アドレスが負の場合レンジ外となるレンジ外データは無視されるこのメソッドでは本体データとしてセパレータの",""\n"を与えることはできない（禁則事項）リザルトとして書き込みに成功したベクトル（左上、右下）、書き換え前のデータストリーム、書き込みに成功したデータを返す
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>myAddress</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>myStream</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{*}</span> </dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name="readIN"> </a>
					<div class="fixedFont">
					
					<span class="light">{Boolean}</span>
					<b>readIN</b>(datastream)
					
					</div>
					<div class="description">
						読み込みメソッドラッパとして残置されるが、内部には他フォーマットの判定部分を置かない。インポーターとして使用する場合は、更にこの外側にデータ前処理部分をおくか、このメソッドをオーバーライドして使用すること。戻り値として、parseXps の戻り値を返すこと。2013.04.06
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>datastream</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{Boolean}</span> </dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name="reInitBody"> </a>
					<div class="fixedFont">
					
					<span class="light">{boolean}</span>
					<b>reInitBody</b>(newTimelines, newDuration)
					
					</div>
					<div class="description">
						Xps.reInitBody(newTimelines:int,newDuration:int)Xps本体データのサイズを変更する。元あったデータ内容は可能な限り保存切り捨て分はなくなる。新たに出来たレコードは、ヌルストリングデータで埋める。セクションキャッシュはすべて無効
 トラック引数の値はコメントトラックの値を含めたトラック全数
 トラック状態を[dialog,timing,comment]にするためには３を与える
 レイヤー数にあらず
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>newTimelines</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>newDuration</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{boolean}</span> </dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name="setDuration"> </a>
					<div class="fixedFont">
					
					
					<b>setDuration</b>(myDuration)
					
					</div>
					<div class="description">
						Xpsの継続時間を変更する
     引数：int フレーム数
     現在の値と同じ場合は何もしない
     継続時間が減少する場合はシート後方から削除
     増加の場合は""で初期化
     0は処理失敗
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>myDuration</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name=".sliceReplacementLabel"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">Xps.</span><b>sliceReplacementLabel</b>(myStr)
					
					</div>
					<div class="description">
						グループ記述の有る文字列を分解して要素名とグループ名を分離するXpsクラスメソッド
    引数の文字列を評価してそのラベルとエントリ文字列に分解して返す
    Reaplacmentトラック用

引数:セルエントリ文字列
戻値:配列[エントリ文字列,グループラベル]

グループラベルが存在しない文字列の戻値は要素数１の配列
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>myStr</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name=".stringifyIdf"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">Xps.</span><b>stringifyIdf</b>(myData)
					
					</div>
					<div class="description">
						配列指定で識別子をビルドするテスト用関数
引数: [title,opus,subtitle,scene,cut,time,line,stage,job,status]
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>myData</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name="syncIdentifier"> </a>
					<div class="fixedFont">
					
					
					<b>syncIdentifier</b>(myIdentifier, withoutTime)
					
					</div>
					<div class="description">
						識別子の情報でカットのプロパティを上書きする
    インポート時に必要な情報は識別子にすべて含まれるためそれで上書きを行う
    duration は
        元シートのデータを維持
        新シートに合わせる
    の二択となるので要注意
    新規作成時にライン〜ステータス情報が欠落するのでそれは判定して補う
    識別子に含まれる時間情報を同期させる場合は、引数withoutTimeにfalseを与える
    初期値はtrue(時間同期なし)
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>myIdentifier</b>
									
								</dt>
								<dd></dd>
							
								<dt>
									<b>withoutTime</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name="time"> </a>
					<div class="fixedFont">
					
					<span class="light">{number}</span>
					<b>time</b>()
					
					</div>
					<div class="description">
						カット尺をフレーム数で返す
						
						
					</div>
					
					
					
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{number}</span> </dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name="timeline"> </a>
					<div class="fixedFont">
					
					<span class="light">{*}</span>
					<b>timeline</b>(idx)
					
					</div>
					<div class="description">
						XPS.のメソッドを定義xpsTracksのメンバーをタイムラインオブジェクトとしてアクセスする抽出メソッド
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>idx</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{*}</span> </dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name="toString"> </a>
					<div class="fixedFont">
					
					<span class="light">{string}</span>
					<b>toString</b>()
					
					</div>
					<div class="description">
						書きだしメソッド
						
						
					</div>
					
					
					
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{string}</span> </dd>
							
							</dl>
						
						
						

					
				
			
			
<!-- ============================== event details ========================= -->		
			
			
			<hr />
		</div>

		
<!-- ============================== footer ================================= -->
		<div class="fineprint" style="clear:both">
			
			Documentation generated by <a href="http://code.google.com/p/jsdoc-toolkit/" target="_blank">JsDoc Toolkit</a> 2.4.0 on Tue Feb 26 2019 17:32:04 GMT+0900 (JST)
		</div>
	</body>
</html>
